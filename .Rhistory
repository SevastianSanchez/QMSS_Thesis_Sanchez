source("packages.R")
# Load the merged dataset: un-hash the desired dataset (filtered or unfiltered)
#merged <- read_csv("data/Main CSV Outputs/merged_full_df.csv") # full unfiltered dataset
merged <- read_csv("data/Main CSV Outputs/merged_final_df.csv") # filtered dataset
# Define key variables for analysis
key_vars <- c("sdg_overall", "spi_comp", "sci_overall", "di_score",
"log_gdppc", "gdp_pc")
group_vars <- c("income_level", "regime_type_2", "regime_type_4")
# Basic dimensions of the dataset
cat("Total number of observations (rows):", nrow(merged), "\n")
cat("Total number of variables (columns):", ncol(merged), "\n")
cat("Year range:", min(merged$year, na.rm=TRUE), "to", max(merged$year, na.rm=TRUE), "\n")
cat("Total number of countries:", length(unique(merged$country_code)), "\n")
# Function to get coverage statistics for a variable
get_coverage <- function(data, var_name) {
total_obs <- sum(!is.na(data[[var_name]]))
total_countries <- length(unique(data$country_code[!is.na(data[[var_name]])]))
total_years <- length(unique(data$year[!is.na(data[[var_name]])]))
missing_obs <- sum(is.na(data[[var_name]]))
missing_percent <- round(missing_obs / nrow(data) * 100, 2)
return(data.frame(
Variable = var_name,
Observations = total_obs,
Countries = total_countries,
Years = total_years,
Missing = missing_obs,
Missing_Percent = missing_percent
))
}
# Get coverage for all key variables
coverage_stats <- bind_rows(lapply(key_vars, function(var) get_coverage(merged, var)))
# Create the table with APA styling and no caption number
coverage_table <- kable(coverage_stats,
caption = "Coverage Statistics for Key Variables",
col.names = c("Variable", "Observations", "Countries", "Years", "Missing Values", "Missing (%)"),
align = c('l', rep('c', 5)),
booktabs = TRUE) %>%
kable_classic(full_width = FALSE, html_font = "Times New Roman", font_size = 12, "basic") %>%
row_spec(0, bold = FALSE, align = "c") %>%
column_spec(1, bold = FALSE)
# Save the table as HTML
save_kable(coverage_table, file = "figures/descriptive_stats/coverage_stats_table.html")
coverage_table <- kable(coverage_stats,
caption = "Coverage Statistics for Key Variables",
col.names = c("Variable", "Observations", "Countries", "Years", "Missing Values", "Missing (%)"),
align = c('l', rep('c', 5)),
booktabs = TRUE) %>%
kable_classic(full_width = FALSE, html_font = "Times New Roman", font_size = 12, "basic") %>%
row_spec(0, bold = FALSE, align = "c") %>%
column_spec(1, bold = FALSE)
coverage_table
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE,
fig.width = 10, fig.height = 6)
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE,
fig.width = 10, fig.height = 6)
# Chunk 2
# set working directory
setwd("~/Documents/GitHub/QMSS_Thesis_Sanchez")
# Load all packages from the packages.R file
source("packages.R")
# Load the merged dataset: un-hash the desired dataset (filtered or unfiltered)
merged_full <- read_csv("data/Main CSV Outputs/merged_full_df.csv") # full unfiltered dataset
#merged <- read_csv("data/Main CSV Outputs/merged_final_df.csv") # filtered dataset
# Define key variables for analysis
key_vars <- c("sdg_overall", "spi_comp", "sci_overall", "di_score",
"log_gdppc", "gdp_pc")
group_vars <- c("income_level", "regime_type_2", "regime_type_4")
# Chunk 3
# Basic dimensions of the dataset
cat("Total number of observations (rows):", nrow(merged_full), "\n")
cat("Total number of variables (columns):", ncol(merged_full), "\n")
cat("Year range:", min(merged_full$year, na.rm=TRUE), "to", max(merged_full$year, na.rm=TRUE), "\n")
cat("Total number of countries:", length(unique(merged_full$country_code)), "\n")
# Chunk 4
# Function to get coverage statistics for a variable
get_coverage <- function(data, var_name) {
total_obs <- sum(!is.na(data[[var_name]]))
total_countries <- length(unique(data$country_code[!is.na(data[[var_name]])]))
total_years <- length(unique(data$year[!is.na(data[[var_name]])]))
missing_obs <- sum(is.na(data[[var_name]]))
missing_percent <- round(missing_obs / nrow(data) * 100, 2)
return(data.frame(
Variable = var_name,
Observations = total_obs,
Countries = total_countries,
Years = total_years,
Missing = missing_obs,
Missing_Percent = missing_percent
))
}
# Get coverage for all key variables
coverage_stats <- bind_rows(lapply(key_vars, function(var) get_coverage(merged_full, var)))
# Create the table with APA styling and no caption number
coverage_table <- kable(coverage_stats,
caption = "Coverage Statistics for Key Variables",
col.names = c("Variable", "Observations", "Countries", "Years", "Missing Values", "Missing (%)"),
align = c('l', rep('c', 5)),
booktabs = TRUE) %>%
kable_classic(full_width = FALSE, html_font = "Times New Roman", font_size = 12, "basic") %>%
row_spec(0, bold = FALSE, align = "c") %>%
column_spec(1, bold = FALSE)
# Save the table as HTML
save_kable(coverage_table, file = "figures/descriptive_stats/full_coverage_stats_table.html")
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE,
fig.width = 10, fig.height = 6)
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE,
fig.width = 10, fig.height = 6)
# set working directory
setwd("~/Documents/GitHub/QMSS_Thesis_Sanchez")
# Load all packages from the packages.R file
source("packages.R")
# Load the merged dataset: un-hash the desired dataset (filtered or unfiltered)
#merged_full <- read_csv("data/Main CSV Outputs/merged_full_df.csv") # full unfiltered dataset
merged <- read_csv("data/Main CSV Outputs/merged_final_df.csv") # filtered dataset
# Define key variables for analysis
key_vars <- c("sdg_overall", "spi_comp", "sci_overall", "di_score",
"log_gdppc", "gdp_pc")
group_vars <- c("income_level", "regime_type_2", "regime_type_4")
# Basic dimensions of the dataset
cat("Total number of observations (rows):", nrow(merged_full), "\n")
# set working directory
setwd("~/Documents/GitHub/QMSS_Thesis_Sanchez")
# Load all packages from the packages.R file
source("packages.R")
# Load the merged (filtered, final) and merged_full (unfiltered, full) datasets
merged_full <- read_csv("data/Main CSV Outputs/merged_full_df.csv") # full unfiltered dataset
merged <- read_csv("data/Main CSV Outputs/merged_final_df.csv") # filtered dataset
# Define key variables for analysis
key_vars <- c("sdg_overall", "spi_comp", "sci_overall", "di_score",
"log_gdppc", "gdp_pc")
group_vars <- c("income_level", "regime_type_2", "regime_type_4")
# Basic dimensions of the dataset
cat("Total number of observations (rows):", nrow(merged_full), "\n")
cat("Total number of variables (columns):", ncol(merged_full), "\n")
cat("Year range:", min(merged_full$year, na.rm=TRUE), "to", max(merged_full$year, na.rm=TRUE), "\n")
cat("Total number of countries:", length(unique(merged_full$country_code)), "\n")
# Function to get coverage statistics for a variable
get_coverage <- function(data, var_name) {
total_obs <- sum(!is.na(data[[var_name]]))
total_countries <- length(unique(data$country_code[!is.na(data[[var_name]])]))
total_years <- length(unique(data$year[!is.na(data[[var_name]])]))
missing_obs <- sum(is.na(data[[var_name]]))
missing_percent <- round(missing_obs / nrow(data) * 100, 2)
return(data.frame(
Variable = var_name,
Observations = total_obs,
Countries = total_countries,
Years = total_years,
Missing = missing_obs,
Missing_Percent = missing_percent
))
}
# Get coverage for all key variables
coverage_stats <- bind_rows(lapply(key_vars, function(var) get_coverage(merged_full, var)))
# Create the table with APA styling and no caption number
coverage_table <- kable(coverage_stats,
caption = "Coverage Statistics for Key Variables",
col.names = c("Variable", "Observations", "Countries", "Years", "Missing Values", "Missing (%)"),
align = c('l', rep('c', 5)),
booktabs = TRUE) %>%
kable_classic(full_width = FALSE, html_font = "Times New Roman", font_size = 12, "basic") %>%
row_spec(0, bold = FALSE, align = "c") %>%
column_spec(1, bold = FALSE)
# Save the table as HTML
#save_kable(coverage_table, file = "figures/descriptive_stats/full_coverage_stats_table.html")
# Display the table in the document
coverage_table
?kable
coverage_table
# Create a table showing variable coverage by year
year_coverage <- merged_full %>%
group_by(year) %>%
summarise(across(all_of(key_vars), ~sum(!is.na(.)), .names = "{.col}_count")) %>%
arrange(year)
# Create the table with APA styling and no caption number
year_coverage_table <- kable(year_coverage,
caption = "Number of Non-Missing Observations by Year for Key Variables",
booktabs = TRUE,
align = c('l', rep('c', length(key_vars)))) %>%
kable_classic(full_width = FALSE, html_font = "Times New Roman", font_size = 12, "basic") %>%
row_spec(0, bold = FALSE, align = "c") %>%
column_spec(1, bold = FALSE)
# Save the table as HTML
save_kable(year_coverage_table, file = "figures/descriptive_stats/full_year_coverage_table.html")
# Function to get coverage statistics for a variable
get_coverage <- function(data, var_name) {
total_obs <- sum(!is.na(data[[var_name]]))
total_countries <- length(unique(data$country_code[!is.na(data[[var_name]])]))
total_years <- length(unique(data$year[!is.na(data[[var_name]])]))
missing_obs <- sum(is.na(data[[var_name]]))
missing_percent <- round(missing_obs / nrow(data) * 100, 2)
return(data.frame(
Variable = var_name,
Observations = total_obs,
Countries = total_countries,
Years = total_years,
Missing = missing_obs,
Missing_Percent = missing_percent
))
}
# Get coverage for all key variables
coverage_stats <- bind_rows(lapply(key_vars, function(var) get_coverage(merged_full, var)))
# Create the table with APA styling and no caption number
coverage_table <- kable(coverage_stats,
caption = "Coverage Statistics for Key Variables",
col.names = c("Variable", "Observations", "Countries", "Years", "Missing Values", "Missing (%)"),
align = c('l', rep('c', 5)),
booktabs = TRUE) %>%
kable_classic(full_width = FALSE, html_font = "Times New Roman", font_size = 12, "basic") %>%
row_spec(0, bold = FALSE, align = "c") %>%
column_spec(1, bold = FALSE)
# Save the table as HTML
save_kable(coverage_table, file = ".../figures/descriptive_stats/full_coverage_stats_table.html")
# Function to get coverage statistics for a variable
get_coverage <- function(data, var_name) {
total_obs <- sum(!is.na(data[[var_name]]))
total_countries <- length(unique(data$country_code[!is.na(data[[var_name]])]))
total_years <- length(unique(data$year[!is.na(data[[var_name]])]))
missing_obs <- sum(is.na(data[[var_name]]))
missing_percent <- round(missing_obs / nrow(data) * 100, 2)
return(data.frame(
Variable = var_name,
Observations = total_obs,
Countries = total_countries,
Years = total_years,
Missing = missing_obs,
Missing_Percent = missing_percent
))
}
# Get coverage for all key variables
coverage_stats <- bind_rows(lapply(key_vars, function(var) get_coverage(merged_full, var)))
# Create the table with APA styling and no caption number
coverage_table <- kable(coverage_stats,
caption = "Coverage Statistics for Key Variables",
col.names = c("Variable", "Observations", "Countries", "Years", "Missing Values", "Missing (%)"),
align = c('l', rep('c', 5)),
booktabs = TRUE) %>%
kable_classic(full_width = FALSE, html_font = "Times New Roman", font_size = 12, "basic") %>%
row_spec(0, bold = FALSE, align = "c") %>%
column_spec(1, bold = FALSE)
# Save the table as HTML
save_kable(coverage_table, file = "figures/descriptive_stats/full_coverage_stats_table.html")
# Function to get coverage statistics for a variable
get_coverage <- function(data, var_name) {
total_obs <- sum(!is.na(data[[var_name]]))
total_countries <- length(unique(data$country_code[!is.na(data[[var_name]])]))
total_years <- length(unique(data$year[!is.na(data[[var_name]])]))
missing_obs <- sum(is.na(data[[var_name]]))
missing_percent <- round(missing_obs / nrow(data) * 100, 2)
return(data.frame(
Variable = var_name,
Observations = total_obs,
Countries = total_countries,
Years = total_years,
Missing = missing_obs,
Missing_Percent = missing_percent
))
}
# Get coverage for all key variables
coverage_stats <- bind_rows(lapply(key_vars, function(var) get_coverage(merged_full, var)))
# Create the table with APA styling and no caption number
coverage_table <- kable(coverage_stats,
caption = "Coverage Statistics for Key Variables",
col.names = c("Variable", "Observations", "Countries", "Years", "Missing Values", "Missing (%)"),
align = c('l', rep('c', 5)),
booktabs = TRUE) %>%
kable_classic(full_width = FALSE, html_font = "Times New Roman", font_size = 12, "basic") %>%
row_spec(0, bold = FALSE, align = "c") %>%
column_spec(1, bold = FALSE)
# Save the table as HTML
save_kable(coverage_table, file = "figures/full_coverage_stats_table.html")
# Display the table in the document
coverage_table
# Function to get coverage statistics for a variable
get_coverage <- function(data, var_name) {
total_obs <- sum(!is.na(data[[var_name]]))
total_countries <- length(unique(data$country_code[!is.na(data[[var_name]])]))
total_years <- length(unique(data$year[!is.na(data[[var_name]])]))
missing_obs <- sum(is.na(data[[var_name]]))
missing_percent <- round(missing_obs / nrow(data) * 100, 2)
return(data.frame(
Variable = var_name,
Observations = total_obs,
Countries = total_countries,
Years = total_years,
Missing = missing_obs,
Missing_Percent = missing_percent
))
}
# Get coverage for all key variables
coverage_stats <- bind_rows(lapply(key_vars, function(var) get_coverage(merged_full, var)))
# Create the table with APA styling and no caption number
coverage_table <- kable(coverage_stats,
caption = "Coverage Statistics for Key Variables",
col.names = c("Variable", "Observations", "Countries", "Years", "Missing Values", "Missing (%)"),
align = c('l', rep('c', 5)),
booktabs = TRUE) %>%
kable_classic(full_width = FALSE, html_font = "Times New Roman", font_size = 12, "basic") %>%
row_spec(0, bold = FALSE, align = "c") %>%
column_spec(1, bold = FALSE)
# Save the table as HTML
save_kable(coverage_table, file = "figures/descriptive_stats/full_coverage_stats_table.html")
# Function to get coverage statistics for a variable
get_coverage <- function(data, var_name) {
total_obs <- sum(!is.na(data[[var_name]]))
total_countries <- length(unique(data$country_code[!is.na(data[[var_name]])]))
total_years <- length(unique(data$year[!is.na(data[[var_name]])]))
missing_obs <- sum(is.na(data[[var_name]]))
missing_percent <- round(missing_obs / nrow(data) * 100, 2)
return(data.frame(
Variable = var_name,
Observations = total_obs,
Countries = total_countries,
Years = total_years,
Missing = missing_obs,
Missing_Percent = missing_percent
))
}
# Get coverage for all key variables
coverage_stats <- bind_rows(lapply(key_vars, function(var) get_coverage(merged_full, var)))
# Create the table with APA styling and no caption number
coverage_table <- kable(coverage_stats,
caption = "Coverage Statistics for Key Variables",
col.names = c("Variable", "Observations", "Countries", "Years", "Missing Values", "Missing (%)"),
align = c('l', rep('c', 5)),
booktabs = TRUE) %>%
kable_classic(full_width = FALSE, html_font = "Times New Roman", font_size = 12, "basic") %>%
row_spec(0, bold = FALSE, align = "c") %>%
column_spec(1, bold = FALSE)
# Save the table as HTML
save_kable(coverage_table, file = "figures/descriptive_stats/full_coverage_stats_table.html")
# Function to get coverage statistics for a variable
get_coverage <- function(data, var_name) {
total_obs <- sum(!is.na(data[[var_name]]))
total_countries <- length(unique(data$country_code[!is.na(data[[var_name]])]))
total_years <- length(unique(data$year[!is.na(data[[var_name]])]))
missing_obs <- sum(is.na(data[[var_name]]))
missing_percent <- round(missing_obs / nrow(data) * 100, 2)
return(data.frame(
Variable = var_name,
Observations = total_obs,
Countries = total_countries,
Years = total_years,
Missing = missing_obs,
Missing_Percent = missing_percent
))
}
# Get coverage for all key variables
coverage_stats <- bind_rows(lapply(key_vars, function(var) get_coverage(merged_full, var)))
# Create the table with APA styling and no caption number
coverage_table <- kable(coverage_stats,
caption = "Coverage Statistics for Key Variables",
col.names = c("Variable", "Observations", "Countries", "Years", "Missing Values", "Missing (%)"),
align = c('l', rep('c', 5)),
booktabs = TRUE) %>%
kable_classic(full_width = FALSE, html_font = "Times New Roman", font_size = 12, "basic") %>%
row_spec(0, bold = FALSE, align = "c") %>%
column_spec(1, bold = FALSE)
# Save the table as HTML
save_kable(coverage_table, file = "~/Documents/GitHub/QMSS_Thesis_Sanchez/figures/descriptive_stats/full_coverage_stats_table.html")
# Function to get coverage statistics for a variable
get_coverage <- function(data, var_name) {
total_obs <- sum(!is.na(data[[var_name]]))
total_countries <- length(unique(data$country_code[!is.na(data[[var_name]])]))
total_years <- length(unique(data$year[!is.na(data[[var_name]])]))
missing_obs <- sum(is.na(data[[var_name]]))
missing_percent <- round(missing_obs / nrow(data) * 100, 2)
return(data.frame(
Variable = var_name,
Observations = total_obs,
Countries = total_countries,
Years = total_years,
Missing = missing_obs,
Missing_Percent = missing_percent
))
}
# Get coverage for all key variables
coverage_stats <- bind_rows(lapply(key_vars, function(var) get_coverage(merged_full, var)))
# Create the table with APA styling and no caption number
coverage_table <- kable(coverage_stats,
caption = "Coverage Statistics for Key Variables",
col.names = c("Variable", "Observations", "Countries", "Years", "Missing Values", "Missing (%)"),
align = c('l', rep('c', 5)),
booktabs = TRUE) %>%
kable_classic(full_width = FALSE, html_font = "Times New Roman", font_size = 12, "basic") %>%
row_spec(0, bold = FALSE, align = "c") %>%
column_spec(1, bold = FALSE)
# Save the table as HTML
save_kable(coverage_table, file = "figures/country_trends/full_coverage_stats_table.html")
# Display the table in the document
coverage_table
# Save the table as HTML
save_kable(coverage_table, file = "figures/descriptive_stats/full_coverage_stats_table.html")
getwd()
dir.exists("figures/descriptive_stats")
dir.exists("/Users/sevastiansanchez/Documents/GitHub/QMSS_Thesis_Sanchez/figures/descriptive_stats")
dir.exists("/Users/sevastiansanchez/Documents/GitHub/QMSS_Thesis_Sanchez
dir.exists("/Users/sevastiansanchez/Documents/GitHub/QMSS_Thesis_Sanchez")
dir.exists("/Users/sevastiansanchez/Documents/GitHub/QMSS_Thesis_Sanchez/figures")
dir.exists("/Users/sevastiansanchez/Documents/GitHub/QMSS_Thesis_Sanchez/figures/descriptive_stats")
# set working directory
setwd("~/Documents/GitHub/QMSS_Thesis_Sanchez")
# Load all packages from the packages.R file
source("packages.R")
# Load the merged (filtered, final) and merged_full (unfiltered, full) datasets
merged_full <- read_csv("data/Main CSV Outputs/merged_full_df.csv") # full unfiltered dataset
merged <- read_csv("data/Main CSV Outputs/merged_final_df.csv") # filtered dataset
# Define key variables for analysis
key_vars <- c("sdg_overall", "spi_comp", "sci_overall", "di_score",
"log_gdppc", "gdp_pc")
group_vars <- c("income_level", "regime_type_2", "regime_type_4")
# Basic dimensions of the dataset
cat("Total number of observations (rows):", nrow(merged_full), "\n")
cat("Total number of variables (columns):", ncol(merged_full), "\n")
cat("Year range:", min(merged_full$year, na.rm=TRUE), "to", max(merged_full$year, na.rm=TRUE), "\n")
cat("Total number of countries:", length(unique(merged_full$country_code)), "\n")
# Function to get coverage statistics for a variable
get_coverage <- function(data, var_name) {
total_obs <- sum(!is.na(data[[var_name]]))
total_countries <- length(unique(data$country_code[!is.na(data[[var_name]])]))
total_years <- length(unique(data$year[!is.na(data[[var_name]])]))
missing_obs <- sum(is.na(data[[var_name]]))
missing_percent <- round(missing_obs / nrow(data) * 100, 2)
return(data.frame(
Variable = var_name,
Observations = total_obs,
Countries = total_countries,
Years = total_years,
Missing = missing_obs,
Missing_Percent = missing_percent
))
}
# Get coverage for all key variables
coverage_stats <- bind_rows(lapply(key_vars, function(var) get_coverage(merged_full, var)))
# Create the table with APA styling and no caption number
coverage_table <- kable(coverage_stats,
caption = "Coverage Statistics for Key Variables",
col.names = c("Variable", "Observations", "Countries", "Years", "Missing Values", "Missing (%)"),
align = c('l', rep('c', 5)),
booktabs = TRUE) %>%
kable_classic(full_width = FALSE, html_font = "Times New Roman", font_size = 12, "basic") %>%
row_spec(0, bold = FALSE, align = "c") %>%
column_spec(1, bold = FALSE)
# Save the table as HTML
save_kable(coverage_table, file = "figures/descriptive_stats/full_coverage_stats_table.html")
# Create a table showing variable coverage by year
year_coverage <- merged_full %>%
group_by(year) %>%
summarise(across(all_of(key_vars), ~sum(!is.na(.)), .names = "{.col}_count")) %>%
arrange(year)
# Create the table with APA styling and no caption number
year_coverage_table <- kable(year_coverage,
caption = "Number of Non-Missing Observations by Year for Key Variables",
booktabs = TRUE,
align = c('l', rep('c', length(key_vars)))) %>%
kable_classic(full_width = FALSE, html_font = "Times New Roman", font_size = 12, "basic") %>%
row_spec(0, bold = FALSE, align = "c") %>%
column_spec(1, bold = FALSE)
# Save the table as HTML
save_kable(year_coverage_table, file = "figures/descriptive_stats/full_year_coverage_table.html")
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE,
fig.width = 10, fig.height = 6)
# Chunk 2
# set working directory
setwd("~/Documents/GitHub/QMSS_Thesis_Sanchez")
# Load all packages from the packages.R file
source("packages.R")
# Load the merged (filtered, final) and merged_full (unfiltered, full) datasets
merged_full <- read_csv("data/Main CSV Outputs/merged_full_df.csv") # full unfiltered dataset
merged <- read_csv("data/Main CSV Outputs/merged_final_df.csv") # filtered dataset
# Define key variables for analysis
key_vars <- c("sdg_overall", "spi_comp", "sci_overall", "di_score",
"log_gdppc", "gdp_pc")
group_vars <- c("income_level", "regime_type_2", "regime_type_4")
# Chunk 3
# Basic dimensions of the dataset
cat("Total number of observations (rows):", nrow(merged_full), "\n")
cat("Total number of variables (columns):", ncol(merged_full), "\n")
cat("Year range:", min(merged_full$year, na.rm=TRUE), "to", max(merged_full$year, na.rm=TRUE), "\n")
cat("Total number of countries:", length(unique(merged_full$country_code)), "\n")
# Function to get coverage statistics for a variable
get_coverage <- function(data, var_name) {
total_obs <- sum(!is.na(data[[var_name]]))
total_countries <- length(unique(data$country_code[!is.na(data[[var_name]])]))
total_years <- length(unique(data$year[!is.na(data[[var_name]])]))
missing_obs <- sum(is.na(data[[var_name]]))
missing_percent <- round(missing_obs / nrow(data) * 100, 2)
return(data.frame(
Variable = var_name,
Observations = total_obs,
Countries = total_countries,
Years = total_years,
Missing = missing_obs,
Missing_Percent = missing_percent
))
}
# Get coverage for all key variables
coverage_stats <- bind_rows(lapply(key_vars, function(var) get_coverage(merged_full, var)))
# Create the table with APA styling and no caption number
coverage_table <- kable(coverage_stats,
caption = "Coverage Statistics for Key Variables",
col.names = c("Variable", "Observations", "Countries", "Years", "Missing Values", "Missing (%)"),
align = c('l', rep('c', 5)),
booktabs = TRUE) %>%
kable_classic(full_width = FALSE, html_font = "Times New Roman", font_size = 12, "basic") %>%
row_spec(0, bold = FALSE, align = "c") %>%
column_spec(1, bold = FALSE)
getwd()
