data = panel_data)
summary(ols_sdg_spi_L1, vcov = vcovHC(ols_sdg_spi_L1, cluster = "group", type = "HC1"))
# Adding Lag2: SPI ~ DI
ols_sdg_spi_L2 <- plm(formula = sdg_overall ~ spi_comp + plm::lag(spi_comp, 1)
+ plm::lag(spi_comp, 2) + di_score + plm::lag(di_score, 1)
+ plm::lag(di_score, 2) + log_gdppc
#+ factor(income_level_recoded)
+ factor(year),
model = "pooling",
data = panel_data)
summary(ols_sdg_spi_L2, vcov = vcovHC(ols_sdg_spi_L2, cluster = "group", type = "HC1"))
# Contemporaneous Relationship: SDG ~ SPI
sdg_spi_s2_scatter <- ggplot(panel_data1, aes(x = spi_comp, y = sdg_overall)) +
geom_point(color = "steelblue4", size = 1, alpha = 0.65) +
geom_smooth(method = "lm",
se = TRUE, color = "darkgreen", size = 1) +
labs(
title = "Effect of Statistical Capacity on SDG Performance",
x = "SPI Composite (0-100 Scale)",
y = "SDG Composite (0-100 Scale)"
) +
theme(plot.title = element_text(size = 14))+
theme_minimal()
# Save to specific folder
ggsave("component_2/figures/stage2/sdg_spi_s2_scatterplot.png", sdg_spi_s2_scatter, width = 8, height = 6)
# Contemporaneous Relationship: SDG ~ DI
sdg_di_s2_scatter <- ggplot(panel_data1, aes(x = di_score, y = sdg_overall)) +
geom_point(color = "steelblue", size = 1, alpha = 0.65) +
geom_smooth(method = "lm",
se = TRUE, color = "#f27405", size = 1) +
labs(
title = "Effect of Democracy Levels on SDG Performance",
x = "DI Composite (0-10 Scale)",
y = "SDG Composite (0-100 Scale)"
) +
theme(plot.title = element_text(size = 14))+
theme_minimal()
# Save to specific folder
ggsave("component_2/figures/stage2/sdg_di_s2_scatterplot.png", sdg_di_s2_scatter, width = 8, height = 6)
# side by side comparison using patchwork
library(patchwork)
sdg_spi_s2_scatter + sdg_di_s2_scatter + plot_layout(ncol = 2)
ggsave("component_2/figures/stage2/s2_scatterplots.png", width = 12, height = 8)
# Contemporaneous Relationship: SDG ~ SPI
sdg_spi_s2_scatter <- ggplot(panel_data1, aes(x = spi_comp, y = sdg_overall)) +
geom_point(color = "steelblue", size = 1, alpha = 0.65) +
geom_smooth(method = "lm",
se = TRUE, color = "darkgreen", size = 1) +
labs(
title = "Effect of Statistical Capacity on SDG Performance",
x = "SPI Composite (0-100 Scale)",
y = "SDG Composite (0-100 Scale)"
) +
theme(plot.title = element_text(size = 14))+
theme_minimal()
# Save to specific folder
ggsave("component_2/figures/stage2/sdg_spi_s2_scatterplot.png", sdg_spi_s2_scatter, width = 8, height = 6)
# Contemporaneous Relationship: SDG ~ DI
sdg_di_s2_scatter <- ggplot(panel_data1, aes(x = di_score, y = sdg_overall)) +
geom_point(color = "steelblue", size = 1, alpha = 0.65) +
geom_smooth(method = "lm",
se = TRUE, color = "#f27405", size = 1) +
labs(
title = "Effect of Democracy Levels on SDG Performance",
x = "DI Composite (0-10 Scale)",
y = "SDG Composite (0-100 Scale)"
) +
theme(plot.title = element_text(size = 14))+
theme_minimal()
# Save to specific folder
ggsave("component_2/figures/stage2/sdg_di_s2_scatterplot.png", sdg_di_s2_scatter, width = 8, height = 6)
# side by side comparison using patchwork
library(patchwork)
sdg_spi_s2_scatter + sdg_di_s2_scatter + plot_layout(ncol = 2)
ggsave("component_2/figures/stage2/s2_scatterplots.png", width = 12, height = 8)
# Contemporaneous Relationship: SDG ~ SPI
sdg_spi_s2_scatter <- ggplot(panel_data1, aes(x = spi_comp, y = sdg_overall)) +
geom_point(color = "steelblue3", size = 1, alpha = 0.65) +
geom_smooth(method = "lm",
se = TRUE, color = "darkgreen", size = 1) +
labs(
title = "Effect of Statistical Capacity on SDG Performance",
x = "SPI Composite (0-100 Scale)",
y = "SDG Composite (0-100 Scale)"
) +
theme(plot.title = element_text(size = 14))+
theme_minimal()
# Save to specific folder
ggsave("component_2/figures/stage2/sdg_spi_s2_scatterplot.png", sdg_spi_s2_scatter, width = 8, height = 6)
# Contemporaneous Relationship: SDG ~ DI
sdg_di_s2_scatter <- ggplot(panel_data1, aes(x = di_score, y = sdg_overall)) +
geom_point(color = "steelblue", size = 1, alpha = 0.65) +
geom_smooth(method = "lm",
se = TRUE, color = "#f27405", size = 1) +
labs(
title = "Effect of Democracy Levels on SDG Performance",
x = "DI Composite (0-10 Scale)",
y = "SDG Composite (0-100 Scale)"
) +
theme(plot.title = element_text(size = 14))+
theme_minimal()
# Save to specific folder
ggsave("component_2/figures/stage2/sdg_di_s2_scatterplot.png", sdg_di_s2_scatter, width = 8, height = 6)
# side by side comparison using patchwork
library(patchwork)
sdg_spi_s2_scatter + sdg_di_s2_scatter + plot_layout(ncol = 2)
ggsave("component_2/figures/stage2/s2_scatterplots.png", width = 12, height = 8)
# Contemporaneous Relationship: SDG ~ SPI
sdg_spi_s2_scatter <- ggplot(panel_data1, aes(x = spi_comp, y = sdg_overall)) +
geom_point(color = "steelblue4", size = 1, alpha = 0.65) +
geom_smooth(method = "lm",
se = TRUE, color = "darkgreen", size = 1) +
labs(
title = "Effect of Statistical Capacity on SDG Performance",
x = "SPI Composite (0-100 Scale)",
y = "SDG Composite (0-100 Scale)"
) +
theme(plot.title = element_text(size = 14))+
theme_minimal()
# Save to specific folder
ggsave("component_2/figures/stage2/sdg_spi_s2_scatterplot.png", sdg_spi_s2_scatter, width = 8, height = 6)
# Contemporaneous Relationship: SDG ~ DI
sdg_di_s2_scatter <- ggplot(panel_data1, aes(x = di_score, y = sdg_overall)) +
geom_point(color = "steelblue", size = 1, alpha = 0.65) +
geom_smooth(method = "lm",
se = TRUE, color = "#f27405", size = 1) +
labs(
title = "Effect of Democracy Levels on SDG Performance",
x = "DI Composite (0-10 Scale)",
y = "SDG Composite (0-100 Scale)"
) +
theme(plot.title = element_text(size = 14))+
theme_minimal()
# Save to specific folder
ggsave("component_2/figures/stage2/sdg_di_s2_scatterplot.png", sdg_di_s2_scatter, width = 8, height = 6)
# side by side comparison using patchwork
library(patchwork)
sdg_spi_s2_scatter + sdg_di_s2_scatter + plot_layout(ncol = 2)
ggsave("component_2/figures/stage2/s2_scatterplots.png", width = 12, height = 8)
# Contemporaneous Relationship: SDG ~ SPI
sdg_spi_s2_scatter <- ggplot(panel_data1, aes(x = spi_comp, y = sdg_overall)) +
geom_point(color = "steelblue4", size = 1, alpha = 0.65) +
geom_smooth(method = "lm",
se = TRUE, color = "darkgreen", size = 1) +
labs(
title = "Effect of Statistical Capacity on SDG Performance",
x = "SPI Composite (0-100 Scale)",
y = "SDG Composite (0-100 Scale)"
) +
theme(plot.title = element_text(size = 14))+
theme_minimal()
# Save to specific folder
ggsave("component_2/figures/stage2/sdg_spi_s2_scatterplot.png", sdg_spi_s2_scatter, width = 8, height = 6)
# Contemporaneous Relationship: SDG ~ DI
sdg_di_s2_scatter <- ggplot(panel_data1, aes(x = di_score, y = sdg_overall)) +
geom_point(color = "steelblue4", size = 1, alpha = 0.65) +
geom_smooth(method = "lm",
se = TRUE, color = "#f27405", size = 1) +
labs(
title = "Effect of Democracy Levels on SDG Performance",
x = "DI Composite (0-10 Scale)",
y = "SDG Composite (0-100 Scale)"
) +
theme(plot.title = element_text(size = 14))+
theme_minimal()
# Save to specific folder
ggsave("component_2/figures/stage2/sdg_di_s2_scatterplot.png", sdg_di_s2_scatter, width = 8, height = 6)
# side by side comparison using patchwork
library(patchwork)
sdg_spi_s2_scatter + sdg_di_s2_scatter + plot_layout(ncol = 2)
ggsave("component_2/figures/stage2/s2_scatterplots.png", width = 12, height = 8)
# Chunk 1
knitr::opts_chunk$set(
echo = TRUE, warning = FALSE, message = FALSE,
tidy = TRUE, tidy.opts = list(width.cutoff = 60)
)
# Chunk 2
# set working directory
setwd("~/Documents/GitHub/QMSS_Thesis_Sanchez")
#load libraries/packages
source("packages.R")
# load data
source("Comp2_panel_wrangling.R")
panel_data1 <- panel_data %>%
dplyr::select(country_name, country_code, year, spi_comp, di_score, log_gdppc, income_level_recoded, di_score_reverse) %>%
dplyr::arrange(country_code, year)
# how many countries
length(unique(panel_data1$country_code))
# check dimensions
dim(panel_data1)
# testing dataframes for sensitivity of results
# panel_data <- panel_data_spi
# Chunk 3
panel_data <- pdata.frame(panel_data1, index = c("country_code", "year"))
pdim(panel_data) # check panel dimensions
# Chunk 4
# Contemporaneous Effect: SPI ~ DI
ols_spi_di <- plm(
formula = spi_comp ~ di_score
+ log_gdppc
#+ factor(income_level_recoded)
+ factor(year),
model = "pooling",
data = panel_data)
summary(ols_spi_di, vcov = vcovHC(ols_spi_di, cluster = "group", type = "HC1"))
# Adding Lag1: SPI ~ DI
ols_spi_di_L1 <- plm(
formula = spi_comp ~ di_score + plm::lag(di_score, 1)
+ log_gdppc
#+ factor(income_level_recoded)
+ factor(year),
model = "pooling",
data = panel_data)
summary(ols_spi_di_L1, vcov = vcovHC(ols_spi_di_L1, cluster = "group", type = "HC1"))
# Adding Lag2: SPI ~ DI
ols_spi_di_L2 <- plm(
formula = spi_comp ~ di_score + plm::lag(di_score, 1) + plm::lag(di_score, 2)
+ log_gdppc
#+ factor(income_level_recoded)
+ factor(year),
model = "pooling",
data = panel_data)
summary(ols_spi_di_L2, vcov = vcovHC(ols_spi_di_L2, cluster = "group", type = "HC1"))
# Contemporaneous Relationship: SPI ~ DI
spi_di_s1_scatter <- ggplot(panel_data1, aes(x = di_score, y = spi_comp)) +
geom_point(color = "steelblue4", size = 1, alpha = 0.65) +
geom_smooth(method = "lm",
se = TRUE, color = "darkblue", size = 1) +
labs(
title = "Effect of Democracy Levels on Statistical Capacity",
x = "Democracy Index (0-10 Scale)",
y = "SPI Composite (0-100 Scale)"
) +
theme_minimal()+
theme(plot.title = element_text(size = 14))+
ylim(20, 100)
# Save to specific folder
#ggsave("figures/stage_1_n_2_scatterplots/spi_di_s1_scatterplot.png", spi_di_s1_scatter, width = 6, height = 8)
# Contemporaneous Relationship: SPI ~ DI_Reversed
spi_di_rev_scatter <- ggplot(panel_data1, aes(x = di_score_reverse, y = spi_comp)) +
geom_point(color = "steelblue4", size = 1, alpha = 0.65) +
geom_smooth(method = "lm",
se = TRUE, color = "darkblue", size = 1) +
labs(
title = "Effect of Autocracy Levels on Statistical Capacity (reversed DI)",
x = "Democracy Index (0-10 Scale) [Higher = More Autocratic]",
y = "SPI Composite (0-100 Scale)"
) +
theme_minimal() +
theme(plot.title = element_text(size = 14))+
# adjust y axis to start from y = 10
ylim(20, 100)
# Save to specific folder
#ggsave("figures/stage_1_n_2_scatterplots/spi_di_rev_scatter.png", spi_di_rev_scatter, width = 6, height = 8)
# side by side comparison using patchwork
library(patchwork)
spi_di_s1_scatter + spi_di_rev_scatter + plot_layout(ncol = 2)
#ggsave("figures/stage_1_n_2_scatterplots/spi_di_s1_scatterplots.png", width = 12, height = 8)
knitr::opts_chunk$set(
echo = TRUE, warning = FALSE, message = FALSE,
tidy = TRUE, tidy.opts = list(width.cutoff = 60)
)
# set working directory
setwd("~/Documents/GitHub/QMSS_Thesis_Sanchez")
#load libraries/packages
source("packages.R")
# load data
source("Comp2_panel_wrangling.R")
panel_data <- panel_data %>%
dplyr::select(country_name, country_code, year, sdg_overall, di_score, log_gdppc, income_level_recoded) %>%
dplyr::arrange(country_code, year)
# how many countries
length(unique(panel_data$country_code))
# check dimensions
dim(panel_data)
panel_data <- pdata.frame(panel_data, index = c("country_code", "year"))
pdim(panel_data) # check panel dimensions
# Model POLS: Basic FE model with DI as predictor
model_pols <- plm(formula = sdg_overall ~ di_score
#+ plm::lag(di_score, 1)
#+ plm::lag(di_score, 2)
+ log_gdppc
+ factor(year),
data = panel_data,
model = "pooling")
summary(model_pols)
summary(model_pols, vcov = vcovHC(model_pols, cluster = "group", type = "HC1"))
# Model FD: Basic FE model with DI as predictor
model_fd <- plm(formula = sdg_overall ~ di_score
#+ plm::lag(di_score, 1)
#+ plm::lag(di_score, 2)
+ log_gdppc
+ factor(year),
data = panel_data,
model = "fd")
summary(model_fd)
summary(model_fd, vcov = vcovHC(model_fd, cluster = "group", type = "HC1"))
# Model FE: Basic FE model with DI as predictor
model_fe <- plm(formula = sdg_overall ~ di_score
+ plm::lag(di_score, 1)
#+ plm::lag(di_score, 2)
+ log_gdppc
+ factor(year),
data = panel_data,
model = "within")
summary(model_fe)
summary(model_fe, vcov = vcovHC(model_fe, cluster = "group", type = "HC1"))
# Model POLS: Basic FE model with DI as predictor
model_pols <- plm(formula = sdg_overall ~ di_score
+ plm::lag(di_score, 1)
+ plm::lag(di_score, 2)
+ log_gdppc
+ factor(year),
data = panel_data,
model = "pooling")
summary(model_pols)
summary(model_pols, vcov = vcovHC(model_pols, cluster = "group", type = "HC1"))
# Model FD: Basic FE model with DI as predictor
model_fd <- plm(formula = sdg_overall ~ di_score
+ plm::lag(di_score, 1)
+ plm::lag(di_score, 2)
+ log_gdppc
+ factor(year),
data = panel_data,
model = "fd")
summary(model_fd)
summary(model_fd, vcov = vcovHC(model_fd, cluster = "group", type = "HC1"))
# Model FE: Basic FE model with DI as predictor
model_fe <- plm(formula = sdg_overall ~ di_score
+ plm::lag(di_score, 1)
+ plm::lag(di_score, 2)
+ log_gdppc
+ factor(year),
data = panel_data,
model = "within")
summary(model_fe)
summary(model_fe, vcov = vcovHC(model_fe, cluster = "group", type = "HC1"))
# Model POLS: Basic FE model with DI as predictor
model_pols <- plm(formula = sdg_overall ~ di_score
+ plm::lag(di_score, 1)
+ plm::lag(di_score, 2)
+ log_gdppc
+ factor(year),
data = panel_data,
model = "pooling")
summary(model_pols, vcov = vcovHC(model_pols, cluster = "group", type = "HC1"))
# Model FD: Basic FE model with DI as predictor
model_fd <- plm(formula = sdg_overall ~ di_score
+ plm::lag(di_score, 1)
+ plm::lag(di_score, 2)
+ log_gdppc
+ factor(year),
data = panel_data,
model = "fd")
summary(model_fd, vcov = vcovHC(model_fd, cluster = "group", type = "HC1"))
# Model FE: Basic FE model with DI as predictor
model_fe <- plm(formula = sdg_overall ~ di_score
+ plm::lag(di_score, 1)
+ plm::lag(di_score, 2)
+ log_gdppc
+ factor(year),
data = panel_data,
model = "within")
summary(model_fe, vcov = vcovHC(model_fe, cluster = "group", type = "HC1"))
# Generate the stargazer table for Lag2 models
stargazer(model_pols, model_fd, model_fe,
se = rob_se_total_ef,
title = "Stage II Models: Static & Lagged Effects (SDG ~ SPI + DI)",
align = TRUE,
dep.var.labels = "SDG Overall Score",
column.labels = c("POLS", "FD", "FE"),
covariate.labels = c("SPI Composite", "Lagged SPI (t-1)", "Lagged SPI (t-2)", "DI Composite", "Lagged DI (t-1)", "Lagged DI (t-2)",  "Log(GDPper-capita)", "Intercept"),
notes = "Robust standard errors clustered by country in parentheses",
type = "txt",
report = "vcs*",
#keep.stat = c("n", "rsq", "adj.rsq"),
omit = "factor\\(year\\)",  # Omits year FE from display
out = "component_2/figures/stage2/s2_lag2_mods.html")
# Chunk 1
knitr::opts_chunk$set(
echo = TRUE, warning = FALSE, message = FALSE,
tidy = TRUE, tidy.opts = list(width.cutoff = 60)
)
# Chunk 2
# set working directory
setwd("~/Documents/GitHub/QMSS_Thesis_Sanchez")
#load libraries/packages
source("packages.R")
# load data
source("Comp2_panel_wrangling.R")
panel_data <- panel_data %>%
dplyr::select(country_name, country_code, year, sdg_overall, di_score, log_gdppc, income_level_recoded) %>%
dplyr::arrange(country_code, year)
# how many countries
length(unique(panel_data$country_code))
# check dimensions
dim(panel_data)
# Chunk 3
panel_data <- pdata.frame(panel_data, index = c("country_code", "year"))
pdim(panel_data) # check panel dimensions
# Chunk 4
# Model POLS: Basic FE model with DI as predictor
model_pols <- plm(formula = sdg_overall ~ di_score
+ plm::lag(di_score, 1)
+ plm::lag(di_score, 2)
+ log_gdppc
+ factor(year),
data = panel_data,
model = "pooling")
summary(model_pols, vcov = vcovHC(model_pols, cluster = "group", type = "HC1"))
# Model FD: Basic FE model with DI as predictor
model_fd <- plm(formula = sdg_overall ~ di_score
+ plm::lag(di_score, 1)
+ plm::lag(di_score, 2)
+ log_gdppc
+ factor(year),
data = panel_data,
model = "fd")
summary(model_fd, vcov = vcovHC(model_fd, cluster = "group", type = "HC1"))
# Model FE: Basic FE model with DI as predictor
model_fe <- plm(formula = sdg_overall ~ di_score
+ plm::lag(di_score, 1)
+ plm::lag(di_score, 2)
+ log_gdppc
+ factor(year),
data = panel_data,
model = "within")
summary(model_fe, vcov = vcovHC(model_fe, cluster = "group", type = "HC1"))
rob_se_total_ef <- list(
sqrt(diag(vcovHC(model_pols, cluster = "group", type = "HC1"))),
sqrt(diag(vcovHC(model_fd, cluster = "group", type = "HC1"))),
sqrt(diag(vcovHC(model_fe, cluster = "group", type = "HC1")))
)
# Generate the stargazer table for Lag2 models
stargazer(model_pols, model_fd, model_fe,
se = rob_se_total_ef,
title = "Stage II Models: Static & Lagged Effects (SDG ~ SPI + DI)",
align = TRUE,
dep.var.labels = "SDG Overall Score",
column.labels = c("POLS", "FD", "FE"),
covariate.labels = c("SPI Composite", "Lagged SPI (t-1)", "Lagged SPI (t-2)", "DI Composite", "Lagged DI (t-1)", "Lagged DI (t-2)",  "Log(GDPper-capita)", "Intercept"),
notes = "Robust standard errors clustered by country in parentheses",
type = "txt",
report = "vcs*",
#keep.stat = c("n", "rsq", "adj.rsq"),
omit = "factor\\(year\\)",  # Omits year FE from display
out = "component_2/figures/stage2/s2_lag2_mods.html")
rob_se_total_ef <- list(
sqrt(diag(vcovHC(model_pols, cluster = "group", type = "HC1"))),
sqrt(diag(vcovHC(model_fd, cluster = "group", type = "HC1"))),
sqrt(diag(vcovHC(model_fe, cluster = "group", type = "HC1")))
)
# Generate the stargazer table for Lag2 models
stargazer(model_pols, model_fd, model_fe,
se = rob_se_total_ef,
title = "Stage II Models: Static & Lagged Effects (SDG ~ SPI + DI)",
align = TRUE,
dep.var.labels = "SDG Overall Score",
column.labels = c("POLS", "FD", "FE"),
covariate.labels = c("SPI Composite", "Lagged SPI (t-1)", "Lagged SPI (t-2)", "DI Composite", "Lagged DI (t-1)", "Lagged DI (t-2)",  "Log(GDPper-capita)", "Intercept"),
notes = "Robust standard errors clustered by country in parentheses",
type = "text",
report = "vcs*",
#keep.stat = c("n", "rsq", "adj.rsq"),
omit = "factor\\(year\\)",  # Omits year FE from display
out = "component_2/figures/stage2/s2_lag2_mods.html")
rob_se_total_ef <- list(
sqrt(diag(vcovHC(model_pols, cluster = "group", type = "HC1"))),
sqrt(diag(vcovHC(model_fd, cluster = "group", type = "HC1"))),
sqrt(diag(vcovHC(model_fe, cluster = "group", type = "HC1")))
)
# Generate the stargazer table for Lag2 models
stargazer(model_pols, model_fd, model_fe,
se = rob_se_total_ef,
title = " Total Effect: Static & Lagged Effects (SDG ~ DI)",
align = TRUE,
dep.var.labels = "SDG Overall Score",
column.labels = c("POLS", "FD", "FE"),
covariate.labels = c("DI Composite", "Lagged DI (t-1)", "Lagged DI (t-2)",  "Log(GDPper-capita)", "Intercept"),
notes = "Robust standard errors clustered by country in parentheses",
type = "html",
report = "vcs*",
#keep.stat = c("n", "rsq", "adj.rsq"),
omit = "factor\\(year\\)",  # Omits year FE from display
out = "component_2/figures/total_effect/total_ef_L2_mods.html")
# Model POLS: Basic FE model with DI as predictor
model_pols <- plm(formula = sdg_overall ~ di_score
+ plm::lag(di_score, 1)
+ plm::lag(di_score, 2)
+ log_gdppc
+ factor(year),
data = panel_data,
model = "pooling")
summary(model_pols, vcov = vcovHC(model_pols, cluster = "group", type = "HC1"))
# Model FD: Basic FE model with DI as predictor
model_fd <- plm(formula = sdg_overall ~ di_score
+ plm::lag(di_score, 1)
+ plm::lag(di_score, 2)
+ log_gdppc
+ factor(year),
data = panel_data,
model = "fd")
summary(model_fd, vcov = vcovHC(model_fd, cluster = "group", type = "HC1"))
# Model FE: Basic FE model with DI as predictor
model_fe <- plm(formula = sdg_overall ~ di_score
+ plm::lag(di_score, 1)
+ plm::lag(di_score, 2)
+ log_gdppc
+ factor(year),
data = panel_data,
model = "within")
summary(model_fe, vcov = vcovHC(model_fe, cluster = "group", type = "HC1"))
