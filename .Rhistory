out = "compiled_materials/results/stats/regime_change_status_by_country.html")
# Chunk 4
# Frequency table of countries based on has_aut_ep, has_dem_ep, has_neither, autocratized, democratized, and stable variables [DONE!!]
freq_regime_change_status <- regime_change_status %>%
summarise(
Total_Countries = n(),
Countries_with_Autocratization_Episodes = sum(as.numeric(as.character(has_aut_ep)), na.rm = TRUE),
Countries_with_Democratization_Episodes = sum(as.numeric(as.character(has_dem_ep)), na.rm = TRUE),
Countries_with_Neither = sum(as.numeric(as.character(has_neither)), na.rm = TRUE),
Countries_that_Autocratized = sum(as.numeric(as.character(autocratized)), na.rm = TRUE),
Countries_that_Democratized = sum(as.numeric(as.character(democratized)), na.rm = TRUE),
Stable_Countries = sum(as.numeric(as.character(stable)), na.rm = TRUE)
) %>%
# pivot the freq_table to long format for better visualization
pivot_longer(cols = everything(), names_to = "Category", values_to = "Count")
# Chunk 5
# Convert the frequency table to a stargazer table for better visualization
stargazer(freq_regime_change_status,
type = "html",
summary = FALSE,
title = "Frequency Table of Regime Change Status",
digits = 0,
out = "compiled_materials/results/stats/regime_change_status_counts.html")
# Chunk 6
# Create a table showing the number of years with data for each key variable by country
country_variable_coverage <- panel_data %>%
group_by(country_code) %>%
summarize(
country_name = first(country_name),  # Keep the country name for reference
total_years = n(),  # Total years in dataset for this country
spi_comp_years = sum(!is.na(spi_comp)),
sci_overall_years = sum(!is.na(sci_overall)),
sdg_overall_years = sum(!is.na(sdg_overall)),
di_score_years = sum(!is.na(di_score)),
log_gdppc_years = sum(!is.na(log_gdppc))
) %>%
ungroup() %>%
# Calculate coverage percentages
mutate(across(
c(spi_comp_years, sci_overall_years, sdg_overall_years, di_score_years, log_gdppc_years),
list(pct = ~round(. / total_years * 100, 1)),
.names = "{.col}_pct"
)) %>%
# Arrange by country name for easier reading
arrange(country_name)
print(country_variable_coverage)
# Convert the country_variable_coverage table to a stargazer table for better visualization
stargazer(country_variable_coverage,
type = "html",
summary = FALSE,
title = "Country Variable Coverage",
digits = 1,
out = "compiled_materials/results/stats/country_variable_coverage.html")
print(country_variable_coverage)
View(country_variable_coverage)
# set working directory
setwd("~/Documents/GitHub/QMSS_Thesis_Sanchez")
#load libraries/packages
source("packages.R")
# load data
source("Comp2_panel_wrangling.R")
model1 <- plm(spi_comp ~ sdg_overall + dplyr::lag(sdg_overall, 1) + dplyr::lag(sdg_overall, 2) + di_score + dplyr::lag(di_score, 1) + dplyr::lag(di_score, 2) + log_gdppc + income_level_recoded,
data = panel_data,
model = "within",
index = c("country", "year"),
effect = "twoways")
model1 <- plm(spi_comp ~ sdg_overall + dplyr::lag(sdg_overall, 1) + dplyr::lag(sdg_overall, 2) + di_score + dplyr::lag(di_score, 1) + dplyr::lag(di_score, 2) + log_gdppc + income_level_recoded,
data = panel_data,
model = "within",
index = c("country_code", "year"),
effect = "twoways")
summary(model1)
summary(model1, vcov = vcovHC(model1, cluster = "group", type = "HC1"))
model2 <- plm(sdg_overall ~ spi_comp + dplyr::lag(spi_comp, 1) + dplyr::lag(spi_comp, 2) + di_score + dplyr::lag(di_score, 1) + dplyr::lag(di_score, 2) + log_gdppc + income_level_recoded,
data = panel_data,
model = "within",
index = c("country_code", "year"),
effect = "twoways")
summary(model2)
summary(model2, vcov = vcovHC(model2, cluster = "group", type = "HC1"))
model1 <- plm(spi_comp ~ sdg_overall + dplyr::lag(sdg_overall, 1) + dplyr::lag(sdg_overall, 2) + di_score + dplyr::lag(di_score, 1) + dplyr::lag(di_score, 2) + log_gdppc + income_level_recoded,
data = panel_data,
model = "within",
index = c("country_code", "year"),
effect = "twoways")
summary(model1)
summary(model1, vcov = vcovHC(model1, cluster = "group", type = "HC1"))
model2 <- plm(sdg_overall ~ spi_comp + dplyr::lag(spi_comp, 1) + dplyr::lag(spi_comp, 2) + di_score + dplyr::lag(di_score, 1) + dplyr::lag(di_score, 2) + log_gdppc + income_level_recoded,
data = panel_data,
model = "within",
index = c("country_code", "year"),
effect = "twoways")
summary(model2)
summary(model2, vcov = vcovHC(model2, cluster = "group", type = "HC1"))
model1 <- plm(spi_comp ~ sdg_overall + dplyr::lag(sdg_overall, 1) + dplyr::lag(sdg_overall, 2) + di_score + dplyr::lag(di_score, 1) + dplyr::lag(di_score, 2) + log_gdppc + income_level_recoded,
data = panel_data,
model = "within",
index = c("country_code", "year"),
effect = "twoways")
summary(model1, vcov = vcovHC(model1, cluster = "group", type = "HC1"))
model2 <- plm(sdg_overall ~ spi_comp + dplyr::lag(spi_comp, 1) + dplyr::lag(spi_comp, 2) + di_score + dplyr::lag(di_score, 1) + dplyr::lag(di_score, 2) + log_gdppc + income_level_recoded,
data = panel_data,
model = "within",
index = c("country_code", "year"),
effect = "twoways")
summary(model2, vcov = vcovHC(model2, cluster = "group", type = "HC1"))
# Define the group variable based on regime stability
group <-
NULL
# panel_data$has_aut_ep == 1
# panel_data$has_dem_ep == 1
# panel_data$has_neither == 1
# panel_data$autocratized == 1
# panel_data$democratized == 1
# panel_data$stable == 1
# baseline model
FE_no_spi <- plm(formula = sdg_overall ~ di_score + dplyr::lag(di_score, 1) + dplyr::lag(di_score, 2) + log_gdppc + income_level_recoded,
model = "within",
index = c("country_code", "year"),
data = panel_data,
subset = group, # modifying based on regime stability
effect = "twoways")
summary(FE_no_spi)
summary(FE_no_spi, vcov = vcovHC(FE_no_spi, cluster = "group", type = "HC1"))
# baseline model
FE_with_SPI <- plm(formula = sdg_overall ~ spi_comp + dplyr::lag(spi_comp, 1) + dplyr::lag(spi_comp, 2) + di_score + dplyr::lag(di_score, 1) + dplyr::lag(di_score, 2) + log_gdppc + income_level_recoded,
model = "within",
index = c("country_code", "year"),
data = panel_data,
subset = group, # modifying based on regime stability
effect = "twoways")
summary(FE_with_SPI)
summary(FE_with_SPI, vcov = vcovHC(FE_with_SPI, cluster = "group", type = "HC1"))
# Define the group variable based on regime stability
group <-
# NULL
# panel_data$has_aut_ep == 1
# panel_data$has_dem_ep == 1
# panel_data$has_neither == 1
# panel_data$autocratized == 1
# panel_data$democratized == 1
# panel_data$stable == 1
# baseline model
FE_no_spi <- plm(formula = sdg_overall ~ di_score + dplyr::lag(di_score, 1) + dplyr::lag(di_score, 2) + log_gdppc + income_level_recoded,
model = "within",
index = c("country_code", "year"),
data = panel_data,
subset = group, # modifying based on regime stability
effect = "twoways")
summary(FE_no_spi)
summary(FE_no_spi, vcov = vcovHC(FE_no_spi, cluster = "group", type = "HC1"))
# baseline model
FE_with_SPI <- plm(formula = sdg_overall ~ spi_comp + dplyr::lag(spi_comp, 1) + dplyr::lag(spi_comp, 2) + di_score + dplyr::lag(di_score, 1) + dplyr::lag(di_score, 2) + log_gdppc + income_level_recoded,
model = "within",
index = c("country_code", "year"),
data = panel_data,
subset = group, # modifying based on regime stability
effect = "twoways")
# baseline model
FE_with_SPI <- plm(formula = sdg_overall ~ spi_comp + dplyr::lag(spi_comp, 1) + dplyr::lag(spi_comp, 2) + di_score + dplyr::lag(di_score, 1) + dplyr::lag(di_score, 2) + log_gdppc + income_level_recoded,
model = "within",
index = c("country_code", "year"),
data = panel_data,
subset = group, # modifying based on regime stability
effect = "twoways")
# baseline model
FE_with_SPI <- plm(formula = sdg_overall ~ spi_comp + dplyr::lag(spi_comp, 1) + dplyr::lag(spi_comp, 2) + di_score + dplyr::lag(di_score, 1) + dplyr::lag(di_score, 2) + log_gdppc + income_level_recoded,
model = "within",
index = c("country_code", "year"),
data = panel_data,
subset = group, # modifying based on regime stability
effect = "twoways")
# Define the group variable based on regime stability
group <-
# NULL
# panel_data$has_aut_ep == 1
# panel_data$has_dem_ep == 1
# panel_data$has_neither == 1
panel_data$autocratized == 1
# panel_data$democratized == 1
# panel_data$stable == 1
# baseline model
FE_no_spi <- plm(formula = sdg_overall ~ di_score + dplyr::lag(di_score, 1) + dplyr::lag(di_score, 2) + log_gdppc + income_level_recoded,
model = "within",
index = c("country_code", "year"),
data = panel_data,
subset = group, # modifying based on regime stability
effect = "twoways")
summary(FE_no_spi)
summary(FE_no_spi, vcov = vcovHC(FE_no_spi, cluster = "group", type = "HC1"))
# baseline model
FE_with_SPI <- plm(formula = sdg_overall ~ spi_comp + dplyr::lag(spi_comp, 1) + dplyr::lag(spi_comp, 2) + di_score + dplyr::lag(di_score, 1) + dplyr::lag(di_score, 2) + log_gdppc + income_level_recoded,
model = "within",
index = c("country_code", "year"),
data = panel_data,
subset = group, # modifying based on regime stability
effect = "twoways")
summary(FE_with_SPI)
summary(FE_with_SPI, vcov = vcovHC(FE_with_SPI, cluster = "group", type = "HC1"))
unique(panel_data$country_name[group])
model_data <- model.frame(FE_no_spi)
model_data %>%
rownames_to_column(var = "country_year") %>%
separate(country_year, into = c("country_code", "year"), sep = "\\.") %>%
select(country_code, year, sdg_overall, di_score, log_gdppc, income_level_recoded) %>%
arrange(country_code, year) %>%
print(n = Inf)
model_data <- model.frame(FE_no_spi)
model_data %>%
rownames_to_column(var = "country_year") %>%
separate(country_year, into = c("country_code", "year"), sep = "\\.") %>%
select(country_code, year, sdg_overall, di_score, log_gdppc, income_level_recoded) %>%
arrange(country_code, year) %>%
print(n = Inf)
View(model_data)
model_data <- model.frame(FE_no_spi)
model_data %>%
rownames_to_column(var = "country_year") %>%
separate(country_year, into = c("country_code", "year"), sep = "\\.") %>%
select(country_code, year, sdg_overall, di_score, log_gdppc, income_level_recoded) %>%
arrange(country_code, year)
model_data <- model.frame(FE_no_spi)
unique_countries <- unique(model_data$country_code)
print(unique_countries)
?model.frame()
get_all_vars(FE_no_spi)
FE_no_spi <- plm(formula = sdg_overall ~ di_score + dplyr::lag(di_score, 1) + dplyr::lag(di_score, 2) + log_gdppc + income_level_recoded,
model = "within",
index = c("country_code", "year"),
data = panel_data,
subset = group, # modifying based on regime stability
effect = "twoways")
summary(FE_no_spi)
summary(FE_no_spi, vcov = vcovHC(FE_no_spi, cluster = "group", type = "HC1"))
# Show me a list of countries that were used specifically in this model and the values of the variables
get_all_vars(FE_no_spi)
index(FE_no_spi)
# Extracting model data for both models
extract_plm_data <- function(plm_model) {
# Get index and model frame
idx <- index(plm_model)
mf <- model.frame(plm_model)
# Combine with index first
result <- cbind(
data.frame(country_code = idx[,1], year = idx[,2]),
mf
)
rownames(result) <- NULL
return(result)
}
model_data_no_spi <- extract_plm_data(FE_no_spi)
model_data_with_spi <- extract_plm_data(FE_with_SPI)
# Extracting model data for both models
extract_plm_data <- function(plm_model) {
# Get index and model frame
idx <- index(plm_model)
mf <- model.frame(plm_model)
# Combine with index first
result <- cbind(
data.frame(country_code = idx[,1], year = idx[,2]),
mf
)
rownames(result) <- NULL
return(result)
}
FE_no_spi_data <- extract_plm_data(FE_no_spi)
FE_with_SPI_data <- extract_plm_data(FE_with_SPI)
# set working directory
setwd("~/Documents/GitHub/QMSS_Thesis_Sanchez")
#load libraries/packages
source("packages.R")
# load data
source("Comp2_panel_wrangling.R")
# Define the group variable based on regime stability
group <-
# NULL
# panel_data$has_aut_ep == 1
# panel_data$has_dem_ep == 1
# panel_data$has_neither == 1
panel_data$autocratized == 1
# panel_data$democratized == 1
# panel_data$stable == 1
# baseline model
FE_no_spi <- plm(formula = sdg_overall ~ di_score + dplyr::lag(di_score, 1) + dplyr::lag(di_score, 2) + log_gdppc + income_level_recoded,
model = "within",
index = c("country_code", "year"),
data = panel_data,
subset = group, # modifying based on regime stability
effect = "twoways")
summary(FE_no_spi)
summary(FE_no_spi, vcov = vcovHC(FE_no_spi, cluster = "group", type = "HC1"))
# baseline model
FE_with_SPI <- plm(formula = sdg_overall ~ spi_comp + dplyr::lag(spi_comp, 1) + dplyr::lag(spi_comp, 2) + di_score + dplyr::lag(di_score, 1) + dplyr::lag(di_score, 2) + log_gdppc + income_level_recoded,
model = "within",
index = c("country_code", "year"),
data = panel_data,
subset = group, # modifying based on regime stability
effect = "twoways")
summary(FE_with_SPI)
summary(FE_with_SPI, vcov = vcovHC(FE_with_SPI, cluster = "group", type = "HC1"))
# Extracting model data for both models
extract_plm_data <- function(plm_model) {
# Get index and model frame
idx <- index(plm_model)
mf <- model.frame(plm_model)
# Combine with index first
result <- cbind(
data.frame(country_code = idx[,1], year = idx[,2]),
mf
)
rownames(result) <- NULL
return(result)
}
FE_no_spi_data <- extract_plm_data(FE_no_spi)
FE_with_SPI_data <- extract_plm_data(FE_with_SPI)
FE_no_spi_data
View(FE_no_spi_data)
View(panel_data)
group
# Define the group variable based on regime stability
group <-
# NULL
# panel_data$has_aut_ep == 1
# panel_data$has_dem_ep == 1
# panel_data$has_neither == 1
panel_data$autocratized == 1
# panel_data$democratized == 1
# panel_data$stable == 1
# baseline model
FE_no_spi <- plm(formula = sdg_overall ~ di_score + dplyr::lag(di_score, 1) + dplyr::lag(di_score, 2) + log_gdppc + income_level_recoded,
model = "within",
index = c("country_code", "year"),
data = panel_data,
subset = group, # modifying based on regime stability
effect = "twoways")
summary(FE_no_spi)
summary(FE_no_spi, vcov = vcovHC(FE_no_spi, cluster = "group", type = "HC1"))
# baseline model
FE_with_SPI <- plm(formula = sdg_overall ~ spi_comp + dplyr::lag(spi_comp, 1) + dplyr::lag(spi_comp, 2) + di_score + dplyr::lag(di_score, 1) + dplyr::lag(di_score, 2) + log_gdppc + income_level_recoded,
model = "within",
index = c("country_code", "year"),
data = panel_data,
subset = group, # modifying based on regime stability
effect = "twoways")
summary(FE_with_SPI)
summary(FE_with_SPI, vcov = vcovHC(FE_with_SPI, cluster = "group", type = "HC1"))
# Extracting model data for both models
extract_plm_data <- function(plm_model) {
# Get index and model frame
idx <- index(plm_model)
mf <- model.frame(plm_model)
# Combine with index first
result <- cbind(
data.frame(country_code = idx[,1], year = idx[,2]),
mf
)
rownames(result) <- NULL
return(result)
}
FE_no_spi_data <- extract_plm_data(FE_no_spi)
FE_with_SPI_data <- extract_plm_data(FE_with_SPI)
FE_no_spi_data
FE_with_SPI_data <- extract_plm_data(FE_with_SPI)
plm
?plm()
# Define the group variable based on regime stability
group <-
# NULL
# panel_data$has_aut_ep == 1
# panel_data$has_dem_ep == 1
# panel_data$has_neither == 1
autocratized == 1
# Define the group variable based on regime stability
group <-
# NULL
# panel_data$has_aut_ep == 1
# panel_data$has_dem_ep == 1
# panel_data$has_neither == 1
paste(autocratized == 1)
# Define the group variable based on regime stability
group <-
# NULL
# panel_data$has_aut_ep == 1
# panel_data$has_dem_ep == 1
# panel_data$has_neither == 1
paste('autocratized == 1')
# panel_data$democratized == 1
# panel_data$stable == 1
# baseline model
FE_no_spi <- plm(formula = sdg_overall ~ di_score + dplyr::lag(di_score, 1) + dplyr::lag(di_score, 2) + log_gdppc + income_level_recoded,
model = "within",
index = c("country_code", "year"),
data = panel_data,
subset = group, # modifying based on regime stability
effect = "twoways")
# baseline model
FE_no_spi <- plm(formula = sdg_overall ~ di_score + dplyr::lag(di_score, 1) + dplyr::lag(di_score, 2) + log_gdppc + income_level_recoded,
model = "within",
index = c("country_code", "year"),
data = panel_data,
subset = autocratized = 1, # modifying based on regime stability
# baseline model
FE_no_spi <- plm(formula = sdg_overall ~ di_score + dplyr::lag(di_score, 1) + dplyr::lag(di_score, 2) + log_gdppc + income_level_recoded,
model = "within",
index = c("country_code", "year"),
data = panel_data,
subset = autocratized == 1, # modifying based on regime stability
effect = "twoways")
summary(FE_no_spi)
summary(FE_no_spi, vcov = vcovHC(FE_no_spi, cluster = "group", type = "HC1"))
# Define the group variable based on regime stability
group <-
# NULL
# panel_data$has_aut_ep == 1
# panel_data$has_dem_ep == 1
# panel_data$has_neither == 1
panel_data$autocratized == 1
# panel_data$democratized == 1
# panel_data$stable == 1
# baseline model
FE_no_spi <- plm(formula = sdg_overall ~ di_score + dplyr::lag(di_score, 1) + dplyr::lag(di_score, 2) + log_gdppc + income_level_recoded,
model = "within",
index = c("country_code", "year"),
data = panel_data,
subset = group, # modifying based on regime stability
effect = "twoways")
summary(FE_no_spi)
summary(FE_no_spi, vcov = vcovHC(FE_no_spi, cluster = "group", type = "HC1"))
# Define the group variable based on regime stability
group <-
# NULL
# panel_data$has_aut_ep == 1
# panel_data$has_dem_ep == 1
# panel_data$has_neither == 1
panel_data$autocratized == 1
# panel_data$democratized == 1
# panel_data$stable == 1
# baseline model
FE_no_spi <- plm(formula = sdg_overall ~ di_score + dplyr::lag(di_score, 1) + dplyr::lag(di_score, 2) + log_gdppc + income_level_recoded,
model = "within",
index = c("country_code", "year"),
data = panel_data,
subset = group, # modifying based on regime stability
effect = "twoways")
summary(FE_no_spi)
summary(FE_no_spi, vcov = vcovHC(FE_no_spi, cluster = "group", type = "HC1"))
# baseline model
FE_no_spi <- plm(formula = sdg_overall ~ di_score + dplyr::lag(di_score, 1) + dplyr::lag(di_score, 2) + log_gdppc + income_level_recoded,
model = "within",
index = c("country_code", "year"),
data = panel_data,
subset = autocratized == 1, # modifying based on regime stability
effect = "twoways")
summary(FE_no_spi)
summary(FE_no_spi, vcov = vcovHC(FE_no_spi, cluster = "group", type = "HC1"))
# baseline model
FE_with_SPI <- plm(formula = sdg_overall ~ spi_comp + dplyr::lag(spi_comp, 1) + dplyr::lag(spi_comp, 2) + di_score + dplyr::lag(di_score, 1) + dplyr::lag(di_score, 2) + log_gdppc + income_level_recoded,
model = "within",
index = c("country_code", "year"),
data = panel_data,
subset = autocratized == 1, # modifying based on regime stability
effect = "twoways")
summary(FE_with_SPI)
summary(FE_with_SPI, vcov = vcovHC(FE_with_SPI, cluster = "group", type = "HC1"))
# Extracting model data for both models
extract_plm_data <- function(plm_model) {
# Get index and model frame
idx <- index(plm_model)
mf <- model.frame(plm_model)
# Combine with index first
result <- cbind(
data.frame(country_code = idx[,1], year = idx[,2]),
mf
)
rownames(result) <- NULL
return(result)
}
FE_no_spi_data <- extract_plm_data(FE_no_spi)
FE_with_SPI_data <- extract_plm_data(FE_with_SPI)
FE_no_spi_data
FE_with_SPI_data
View(FE_with_SPI_data)
# Define the group variable based on regime stability
group <-
# NULL
# panel_data$has_aut_ep == 1
# panel_data$has_dem_ep == 1
# panel_data$has_neither == 1
"panel_data$autocratized == 1"
# panel_data$democratized == 1
# panel_data$stable == 1
# baseline model
FE_no_spi <- plm(formula = sdg_overall ~ di_score + dplyr::lag(di_score, 1) + dplyr::lag(di_score, 2) + log_gdppc + income_level_recoded,
model = "within",
index = c("country_code", "year"),
data = panel_data,
subset = paste(group), # modifying based on regime stability
effect = "twoways")
# baseline model
FE_no_spi <- plm(formula = sdg_overall ~ di_score + dplyr::lag(di_score, 1) + dplyr::lag(di_score, 2) + log_gdppc + income_level_recoded,
model = "within",
index = c("country_code", "year"),
data = panel_data,
subset = group, # modifying based on regime stability
effect = "twoways")
# baseline model
FE_no_spi <- plm(formula = sdg_overall ~ di_score + dplyr::lag(di_score, 1) + dplyr::lag(di_score, 2) + log_gdppc + income_level_recoded,
model = "within",
index = c("country_code", "year"),
data = panel_data,
subset = group, # modifying based on regime stability
effect = "twoways")
