---
title: "DAGs"
output: html_document
---

# packages
```{r}
# set working directory
setwd("~/Documents/GitHub/QMSS_Thesis_Sanchez")

#load libraries/packages
source("packages.R")

# load data
source("Comp2_panel_wrangling.R")
```

# SPI -> SDG
```{r}
# Create a nice DAG for the relationship between DI, SPI, and SDG
library(ggdag)
dag_spi_sdg <- dagify(
  sdg_overall ~ spi_comp,
  spi_comp ~ di_score,
  log_gdppc ~ di_score,
  labels = c("sdg_overall" = "SDG Score",
             "spi_comp" = "SPI Score",
             "di_score" = "DI Score",
             "log_gdppc" = "Log GDP per Capita"),
  exposure = "di_score",
  outcome = "sdg_overall"
)
ggdag(dag_spi_sdg, use_labels = "label") +
  theme_dag_blank() +
  labs(title = "DAG: DI -> SPI -> SDG")
```

# SPI -> SDG with Moderators
```{r}
dag_spi_sdg_mod <- dagify(
  sdg_overall ~ spi_comp,
  spi_comp ~ di_score,
  log_gdppc ~ di_score,
  income_level_recoded ~ di_score,
  regime_type_binary ~ di_score,
  aut_ep ~ di_score,
  dem_ep ~ di_score,
  labels = c("sdg_overall" = "SDG Score",
             "spi_comp" = "SPI Score",
             "di_score" = "DI Score",
             "log_gdppc" = "Log GDP per Capita",
             "income_level_recoded" = "Income Level",
             "regime_type_binary" = "Regime Type (Binary)",
             "aut_ep" = "Autocratization Event",
             "dem_ep" = "Democratization Event"),
  exposure = "di_score",
  outcome = "sdg_overall"
)
ggdag(dag_spi_sdg_mod, use_labels = "label") +
  theme_dag_blank() +
  labs(title = "DAG: DI -> SPI -> SDG with Moderators")
# SPI -> SDG with Moderators and Interactions
```

```{r}
dag_spi_sdg_mod_int <- dagify(
  sdg_overall ~ spi_comp,
  spi_comp ~ di_score,
  log_gdppc ~ di_score,
  income_level_recoded ~ di_score,
  regime_type_binary ~ di_score,
  aut_ep ~ di_score,
  dem_ep ~ di_score,
  labels = c("sdg_overall" = "SDG Score",
             "spi_comp" = "SPI Score",
             "di_score" = "DI Score",
             "log_gdppc" = "Log GDP per Capita",
             "income_level_recoded" = "Income Level",
             "regime_type_binary" = "Regime Type (Binary)",
             "aut_ep" = "Autocratization Event",
             "dem_ep" = "Democratization Event"),
  exposure = "di_score",
  outcome = "sdg_overall"
)

ggdag(dag_spi_sdg_mod_int, use_labels = "label") +
  theme_dag_blank() +
  labs(title = "DAG: DI -> SPI -> SDG with Moderators and Interactions")


```


# make a publication-ready DAG of the triangular relationship between DI, SPI, and SDG, please remove the log_gdppc variable and the code names from within the nodes, and use the labels provided in the labels argument
```{r}
dag_spi_sdg_tri <- dagify(
  sdg_overall ~ spi_comp,
  spi_comp ~ di_score,
  labels = c("sdg_overall" = "SDG Score",
             "spi_comp" = "SPI Score",
             "di_score" = "DI Score"),
  exposure = "di_score",
  outcome = "sdg_overall"
)
ggdag(dag_spi_sdg_tri, use_labels = "label") +
  theme_dag_blank() +
  labs(title = "DAG: DI -> SPI -> SDG (Triangular Relationship)")


```

